!function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory:root.fluidvids=factory()}(this,function(){"use strict";function matches(src){return new RegExp("^(https?:)?//(?:"+fluidvids.players.join("|")+").*$","i").test(src)}function getRatio(height,width){return parseInt(height,10)/parseInt(width,10)*100+"%"}function fluid(elem){if((matches(elem.src)||matches(elem.data))&&!elem.getAttribute("data-fluidvids")){var wrap=document.createElement("div");elem.parentNode.insertBefore(wrap,elem),elem.className+=(elem.className?" ":"")+"fluidvids-item",elem.setAttribute("data-fluidvids","loaded"),wrap.className+="fluidvids",wrap.style.paddingTop=getRatio(elem.height,elem.width),wrap.appendChild(elem)}}function addStyles(){var div=document.createElement("div");div.innerHTML="<p>x</p><style>"+css+"</style>",head.appendChild(div.childNodes[1])}var fluidvids={selector:["iframe","object"],players:["www.youtube.com","player.vimeo.com"]},css=[".fluidvids {","width: 100%; max-width: 100%; position: relative;","}",".fluidvids-item {","position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;","}"].join(""),head=document.head||document.getElementsByTagName("head")[0];return fluidvids.render=function(){for(var nodes=document.querySelectorAll(fluidvids.selector.join()),i=nodes.length;i--;)fluid(nodes[i])},fluidvids.init=function(obj){for(var key in obj)fluidvids[key]=obj[key];fluidvids.render(),addStyles()},fluidvids});